{% spaceless %}


{#
  Parameters:
  - title (heading object) (default: {})
  - items (array) (default: [])
    {
      title: (heading object),
      content: [
        description list object
      ]
    }
#}

{% set _title = title|default('') %}
{% set _id = id|default(null) %}
{% set _title_tag = title_tag|default('h2') %}
{% set _title_link = title_link|default({}) %}
{% set _title_attributes = title_attributes ?: create_attribute() %}
{% set _items = items|default([]) %}

{% if attributes is empty %}
  {% set attributes = create_attribute() %}
{% endif %}

{% set _title_classes = ['my-4-5'] %}
{% set _title_attributes = _title_attributes.addClass(_title_classes) %}

{% set _rendered_content %}
  {% if _items is defined and _items is not empty %}
    {% for _item in _items %}
      {% if _item.title is not empty %}
        {% set _item_title_attributes = _item.title_attributes ?: create_attribute() %}
        {% set _item_title_attributes = _item_title_attributes.addClass(['mb-3']) %}
        {% include '@oe-bcl/bcl-heading/heading.html.twig' with {
          title: _item.title,
          title_tag: _item.title_tag|default('h3'),
          title_link: _item.title_link|default({}),
          attributes: _item_title_attributes,
        } only %}
      {% endif %}
      {% for _list in _item.content %}
        {% if _list.attributes is empty %}
          {% set _list = _list|merge({
            attributes: create_attribute()
          }) %}
        {% endif %}
        {% if not loop.last %}
          {% set _list = _list|merge({
            attributes: _list.attributes.addClass(['border-bottom', 'mb-3'])
          }) %}
        {% endif %}
        {% include '@oe-bcl/bcl-description-list/description-list.html.twig' with _list only %}
      {% endfor %}
    {% endfor %}
  {% endif %}
{% endset %}

{% include '@oe-bcl/bcl-section/section.html.twig' with {
  title: _title,
  id: _id,
  content: _rendered_content,
} only %}

{% endspaceless %}
